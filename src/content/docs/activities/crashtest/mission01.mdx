---
title: Mission 1 - D√©ploiement initial de GLPI
description: Installation et s√©curisation de base de GLPI en anticipant les besoins de haute disponibilit√©
---

import { Steps, Card, CardGrid } from '@astrojs/starlight/components';

## Objectif

Installer GLPI dans un environnement de test fonctionnel avec une s√©curit√© de base.

<CardGrid>
  <Card title="Difficult√©" icon="star">
    Facile ü§îüë®‚Äçüíª
  </Card>
  <Card title="Temps estim√©" icon="clock">
    3 heures
  </Card>
</CardGrid>

## Pr√©requis

- Disposer d'un hyperviseur VirtualBox sur h√¥te XUbuntu
- Acc√®s aux VMs de base
- Ma√Ætriser les bases de l'administration Linux

## Contexte

Cette premi√®re mission pose les fondations du projet. L'infrastructure que vous allez mettre en place sera dupliqu√©e lors des missions suivantes pour cr√©er un cluster haute disponibilit√©. Vos choix initiaux auront donc un impact direct sur la complexit√© des √©tapes ult√©rieures.

:::tip[Approche p√©dagogique]
Cette mission propose trois niveaux de r√©alisation :
- ‚≠ê GLPI fonctionnel avec s√©curit√© de base
- ‚≠ê‚≠ê Optimisation et centralisation des logs
- ‚≠ê‚≠ê‚≠ê Architecture modulaire et automatisation

Chaque niveau inclut le pr√©c√©dent. Visez au minimum le niveau ‚≠ê pour valider la mission.
:::

## Architecture cible par niveau

### ‚≠ê Niveau 1 : Installation fonctionnelle
```
[Syst√®me GLPI]
‚îú‚îÄ Serveur web (Apache/Nginx)
‚îú‚îÄ PHP + extensions
‚îú‚îÄ Base de donn√©es (MySQL/MariaDB)
‚îî‚îÄ Application GLPI

Documentation :
‚îú‚îÄ Sch√©ma d'architecture
‚îú‚îÄ Proc√©dure d'installation
‚îî‚îÄ Localisation des logs
```

### ‚≠ê‚≠ê Niveau 2 : Optimisation et logs centralis√©s
```
[Syst√®me GLPI optimis√©]
‚îú‚îÄ Serveur web (optimis√© + HTTPS pr√©par√©)
‚îú‚îÄ PHP (cache activ√©)
‚îú‚îÄ Base de donn√©es (durcie)
‚îî‚îÄ Application GLPI (s√©curis√©e)
        ‚îÇ
        ‚îî‚îÄ‚Üí [Serveur Syslog centralis√©]
```

### ‚≠ê‚≠ê‚≠ê Niveau 3 : Architecture modulaire
```
[Service Web]                [Service BDD]
‚îú‚îÄ Serveur web              ‚îú‚îÄ Base de donn√©es
‚îú‚îÄ PHP + extensions         ‚îî‚îÄ Sauvegarde automatis√©e
‚îî‚îÄ Application GLPI
        ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           (Communication r√©seau)

+ D√©ploiement automatis√©
+ Sauvegarde externalis√©e
```

## T√¢ches √† r√©aliser

### T√¢che 1 ‚≠ê : Analyse et choix architectural

Consultez la [documentation officielle de GLPI](https://help.glpi-project.org/documentation/fr) pour identifier :

<Steps>

1. Les versions minimales requises (PHP, serveur web, base de donn√©es)
2. Les extensions PHP n√©cessaires
3. Les recommandations mat√©rielles (CPU, RAM, stockage)

</Steps>

**Choisissez votre approche de d√©ploiement :** VM traditionnelle ou conteneurisation (_Docker_).

:::tip[Si vous choisissez Docker]
Vous utiliserez _Docker Compose_ pour orchestrer les conteneurs. Cr√©ez votre fichier `docker-compose.yml` avec :
- Un service pour le serveur web + PHP
- Un service pour la base de donn√©es
- Des volumes nomm√©s pour la persistance des donn√©es
- Un r√©seau d√©di√©
:::

**Documentez votre choix** : Pourquoi VM ou Docker ? Quels avantages pour ce projet ?

:::note[Questions pour guider votre r√©flexion]
- Comment allez-vous dupliquer cette installation pour cr√©er un second n≈ìud en mission 5 ?
- En quoi votre choix facilite-t-il la haute disponibilit√© ?
:::

#### T√¢che 1.1 ‚≠ê‚≠ê‚≠ê : Architecture modulaire

**S√©parez les services web et base de donn√©es** d√®s maintenant :
- Deux VMs distinctes (ou deux groupes de conteneurs)
- Communication r√©seau entre les deux
- Sch√©matisez cette architecture

Cette s√©paration facilitera grandement la mise en place du cluster.

---

### T√¢che 2 ‚≠ê : Conception et documentation de base

**Sch√©matisez votre architecture actuelle** incluant :
- Les composants install√©s
- L'organisation (monolithique ou s√©par√©)
- La configuration r√©seau (adresse IP, interface)
- L'emplacement des donn√©es persistantes

**√âtablissez une convention de nommage** pour :
- Les machines virtuelles ou conteneurs (`glpi-web01`, `glpi-db01`)
- Les volumes de donn√©es
- Les r√©seaux virtuels

:::caution[Point d'attention]
Si vous optez pour une installation monolithique maintenant, documentez comment vous s√©parerez web et base de donn√©es en mission 5.
:::

---

### T√¢che 3 ‚≠ê : D√©ploiement de l'infrastructure

Installez la stack compl√®te :

<Steps>

1. **Serveur web** (Apache ou Nginx - justifiez votre choix dans votre documentation)

2. **Base de donn√©es** (MySQL ou MariaDB)

3. **PHP** avec les extensions requises par GLPI

4. **GLPI** via l'assistant web

</Steps>

**Testez** que GLPI est accessible et fonctionnel en cr√©ant quelques objets de test (utilisateur, ticket, √©quipement).

#### T√¢che 3.1 ‚≠ê‚≠ê : Optimisation de la configuration

Optimisez votre installation :
- Ajustez les limites PHP (taille d'upload, m√©moire)
- Activez le cache PHP (_OPcache_)
- Activez la compression HTTP
- Documentez chaque modification

#### T√¢che 3.2 ‚≠ê‚≠ê‚≠ê : D√©ploiement automatis√©

Cr√©ez un script d'installation automatis√© (Bash ou Ansible) permettant de recr√©er l'infrastructure compl√®te en une commande.

Le script doit :
- Installer toutes les d√©pendances
- Configurer les services
- Initialiser GLPI
- √ätre idempotent (rejouable sans probl√®me)

---

### T√¢che 4 ‚≠ê : S√©curisation de la base de donn√©es

Par d√©faut, MySQL/MariaDB pr√©sente des faiblesses :
- Compte root sans mot de passe ou faible
- Comptes anonymes
- Bases de test
- Acc√®s distant root autoris√©

**Votre mission :**
- Durcissez la s√©curit√© MySQL/MariaDB
- Cr√©ez un utilisateur d√©di√© pour GLPI avec les droits minimum n√©cessaires
- Documentez les identifiants de mani√®re s√©curis√©e (gestionnaire de mots de passe)

:::note[Questions]
- Quels privil√®ges MySQL sont vraiment n√©cessaires pour GLPI ?
- Comment restreindre l'acc√®s √† la base GLPI uniquement ?
:::

#### T√¢che 4.1 ‚≠ê‚≠ê : D√©sactivation de l'acc√®s r√©seau MySQL

Si votre base de donn√©es est sur le m√™me syst√®me que le web :
- Configurez MySQL pour n'√©couter que sur `localhost`
- Testez que les connexions externes sont refus√©es
- Documentez cette s√©curisation

---

### T√¢che 5 ‚≠ê : Durcissement de GLPI

GLPI contient des comptes par d√©faut publiquement document√©s :
- `glpi/glpi` (super-admin)
- `tech/tech` (technicien)
- `normal/normal` (utilisateur)
- `post-only/postonly` (post-only)

**Votre mission :**
- S√©curisez ces comptes (suppression, d√©sactivation ou renommage)
- Cr√©ez un compte administrateur personnel avec mot de passe robuste
- Documentez votre strat√©gie

:::caution[R√©flexion]
Analyser les risques : que se passe-t-il si vous supprimez un compte ? Si vous le d√©sactivez ? Si vous le renommez ? Justifiez votre choix.
:::

#### T√¢che 5.1 ‚≠ê‚≠ê : Politique de mots de passe

Configurez une politique de mots de passe dans GLPI :
- Longueur minimale (12 caract√®res)
- Complexit√© requise
- Testez en cr√©ant un utilisateur

---

### T√¢che 6 ‚≠ê : Identification des logs

Pour diagnostiquer des probl√®mes, vous devez savoir o√π trouver les logs.

**Identifiez et documentez** :
- Logs du serveur web
- Logs de la base de donn√©es
- Logs applicatifs de GLPI
- Logs syst√®me

**Testez** : Provoquez une erreur (mauvais mot de passe) et retrouvez la trace dans les logs.

Cr√©ez un document ¬´ O√π trouver quoi dans les logs ¬ª.

#### T√¢che 6.1 ‚≠ê‚≠ê : Centralisation des logs

D√©ployez un serveur Syslog centralis√© en utilisant [docker_logs](https://github.com/manastria/docker_logs).

**Configuration :**
- D√©ployez le conteneur Syslog
- Configurez vos services pour envoyer leurs logs vers ce serveur
- Testez que les logs arrivent bien centralis√©s
- Documentez comment consulter les logs centralis√©s

Cette infrastructure sera r√©utilis√©e pour superviser le cluster en mission 5.

#### T√¢che 6.2 ‚≠ê‚≠ê‚≠ê : Rotation et archivage

Configurez la rotation automatique des logs avec `logrotate` :
- Conservation 30 jours
- Compression des logs de plus de 7 jours
- Archivage dans un r√©pertoire d√©di√©

---

### T√¢che 7 ‚≠ê‚≠ê : Pr√©paration au HTTPS

Familiarisez-vous avec les certificats SSL/TLS :

<Steps>

1. G√©n√©rez un certificat auto-sign√© pour votre serveur

2. Configurez votre serveur web pour accepter HTTPS (en parall√®le de HTTP)

3. Testez l'acc√®s HTTPS et observez l'avertissement du navigateur

</Steps>

**Documentez** : Pourquoi cet avertissement ? Quelle diff√©rence avec un certificat sign√© par une CA reconnue ?

:::note
Vous n'√™tes pas oblig√© d'activer HTTPS comme protocole unique maintenant. La configuration compl√®te HTTPS sera faite dans le projet HAProxy.
:::

#### T√¢che 7.1 ‚≠ê‚≠ê‚≠ê : HTTPS activ√© avec redirection

- Activez HTTPS comme protocole par d√©faut
- Redirigez automatiquement HTTP vers HTTPS
- Testez que tout fonctionne correctement
- Documentez la configuration

---

### T√¢che 8 ‚≠ê : Sauvegarde de base

Cr√©ez une sauvegarde exploitable de votre installation :

**Si VM :**
- Snapshot VirtualBox dat√©
- OU export OVA/OVF

**Si Docker :**
- Sauvegarde du `docker-compose.yml`
- Export des volumes de donn√©es

**Testez** : Restaurez votre installation √† partir de la sauvegarde.

#### T√¢che 8.1 ‚≠ê‚≠ê : Script de sauvegarde automatis√©

Cr√©ez un script qui effectue :
- Export de la base de donn√©es
- Archivage des fichiers GLPI
- Horodatage des archives
- Purge des sauvegardes de plus de 7 jours

Planifiez l'ex√©cution quotidienne avec `cron`.

#### T√¢che 8.2 ‚≠ê‚≠ê‚≠ê : Sauvegarde externalis√©e

- Cr√©ez un serveur de sauvegarde d√©di√© (VM distincte)
- Automatisez le transfert s√©curis√© des sauvegardes (_rsync_ sur SSH)
- Testez la restauration depuis la sauvegarde externalis√©e

---

## Livrables attendus

### ‚≠ê Livrables niveau 1 (obligatoires)

<CardGrid>
  <Card title="Sch√©ma d'architecture" icon="document">
    Composants, flux, adressage IP
  </Card>
  <Card title="Proc√©dure d'installation" icon="list-format">
    Guide pas √† pas reproductible
  </Card>
  <Card title="Documentation s√©curit√©" icon="shield">
    Mesures appliqu√©es sur MySQL et GLPI
  </Card>
  <Card title="Guide des logs" icon="open-book">
    O√π trouver chaque type de log
  </Card>
  <Card title="Sauvegarde test√©e" icon="backup">
    Export fonctionnel de l'installation
  </Card>
  <Card title="Justifications" icon="pencil">
    Choix VM/Docker, serveur web, etc.
  </Card>
</CardGrid>

### ‚≠ê‚≠ê Livrables niveau 2

<CardGrid>
  <Card title="Configuration optimis√©e" icon="rocket">
    Param√®tres modifi√©s et justifications
  </Card>
  <Card title="Logs centralis√©s" icon="server">
    Syslog d√©ploy√© et configur√©
  </Card>
  <Card title="Certificat SSL" icon="lock">
    Certificat g√©n√©r√© et test√©
  </Card>
  <Card title="Scripts de sauvegarde" icon="clockwise">
    Automatisation planifi√©e
  </Card>
</CardGrid>

### ‚≠ê‚≠ê‚≠ê Livrables niveau 3

<CardGrid>
  <Card title="Architecture modulaire" icon="template">
    Services web et BDD s√©par√©s
  </Card>
  <Card title="D√©ploiement automatis√©" icon="workflow">
    Script Bash ou Playbook Ansible
  </Card>
  <Card title="HTTPS actif" icon="shield-check">
    Redirection HTTP‚ÜíHTTPS fonctionnelle
  </Card>
  <Card title="Sauvegarde externalis√©e" icon="backup">
    Transfert automatique test√©
  </Card>
</CardGrid>

## Crit√®res d'√©valuation

| Crit√®re | ‚≠ê Niveau 1 | ‚≠ê‚≠ê Niveau 2 | ‚≠ê‚≠ê‚≠ê Niveau 3 |
|---------|------------|--------------|---------------|
| **Installation** | GLPI fonctionnel | Configuration optimis√©e | Architecture modulaire |
| **S√©curit√© BDD** | Utilisateur d√©di√© cr√©√© | Acc√®s r√©seau d√©sactiv√© | Chiffrement connexions |
| **S√©curit√© GLPI** | Comptes par d√©faut trait√©s | Politique mots de passe | Tests de s√©curit√© |
| **Logs** | Emplacements document√©s | Centralisation op√©rationnelle | Rotation configur√©e |
| **HTTPS** | - | Certificat g√©n√©r√© et test√© | HTTPS actif avec redirection |
| **Sauvegarde** | Backup manuel test√© | Script automatis√© | Externalisation fonctionnelle |
| **Automatisation** | - | - | D√©ploiement script√©s |
| **Documentation** | Sch√©mas + proc√©dures | Justifications d√©taill√©es | Documentation compl√®te |

:::tip[Conseils]
- Le niveau ‚≠ê doit √™tre **enti√®rement r√©alis√©** pour valider la mission
- La **qualit√© de la documentation** est aussi importante que la technique
- Les **justifications** de vos choix valorisent votre travail
:::

## Ressources compl√©mentaires

- [Documentation officielle GLPI](https://glpi-install.readthedocs.io/)
- [Guide de s√©curisation MySQL](https://dev.mysql.com/doc/refman/8.0/en/security-guidelines.html)
- [Documentation Apache](https://httpd.apache.org/docs/2.4/)
- [Documentation Nginx](https://nginx.org/en/docs/)
- [Docker Compose reference](https://docs.docker.com/compose/)
- [Docker Syslog centralis√©](https://github.com/manastria/docker_logs)

:::tip[Prochaine √©tape]
Une fois cette mission termin√©e et valid√©e, vous pourrez passer √† la [Mission 2 - Configuration de la DMZ](/crashtest/mission02) o√π vous s√©curiserez l'acc√®s r√©seau √† votre infrastructure GLPI.
:::
