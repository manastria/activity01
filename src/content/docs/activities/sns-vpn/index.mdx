---
title: "ActivitÃ© - Mise en place d'un VPN SSL avec Stormshield EVA1"
description: "Guide complet pour configurer un VPN SSL permettant l'accÃ¨s sÃ©curisÃ© aux ressources d'entreprise"
sidebar:
  order: 1
status: "draft"
level: "BTS SIO 1"
duration: "45 min"
tags: ["exemple"]
---

# ActivitÃ© - Mise en place d'un VPN SSL avec Stormshield EVA1

## Informations gÃ©nÃ©rales

- **DurÃ©e estimÃ©e** : 8 Ã  12 heures
- **Niveau** : BTS SIO SISR
- **PrÃ©requis** : Configuration rÃ©seau de base, rÃ¨gles de filtrage, NAT
- **ModalitÃ©** : Travail en binÃ´me
- **Livrable** : Compte-rendu d'activitÃ©

---

## Contexte professionnel

### PrÃ©sentation de l'entreprise

**TechServices SARL** est une entreprise de services informatiques qui compte aujourd'hui 45 collaborateurs rÃ©partis sur deux sites :

- **SiÃ¨ge social Ã  Paris** (40 personnes) : hÃ©berge le serveur de fichiers principal, l'ERP de gestion et l'infrastructure rÃ©seau centrale
- **Agence de Lyon** (5 personnes) : petite Ã©quipe commerciale qui doit accÃ©der quotidiennement aux ressources du siÃ¨ge

### ProblÃ©matique

L'entreprise fait face Ã  plusieurs dÃ©fis :

1. **SÃ©curitÃ© des donnÃ©es** : Les collaborateurs de Lyon accÃ¨dent actuellement aux ressources via des connexions non sÃ©curisÃ©es sur Internet
2. **Risques identifiÃ©s** :
   - Interception possible des donnÃ©es sensibles (devis, contrats clients)
   - Absence d'authentification forte
   - Pas de traÃ§abilitÃ© des accÃ¨s
3. **Contraintes budgÃ©taires** : Pas de budget pour une liaison dÃ©diÃ©e ou un VPN site-Ã -site matÃ©riel
4. **Ã‰volution** : DÃ©ploiement futur du tÃ©lÃ©travail pour 10 collaborateurs supplÃ©mentaires

### Solution proposÃ©e

Mise en place d'un **VPN SSL** (Virtual Private Network - Secure Sockets Layer) permettant :

- âœ… Authentification forte des utilisateurs (login/mot de passe + certificats)
- âœ… Chiffrement de bout en bout des communications
- âœ… AccÃ¨s sÃ©curisÃ© aux ressources internes depuis n'importe oÃ¹
- âœ… Solution Ã©conomique (logiciel uniquement)
- âœ… Ã‰volutivitÃ© pour le tÃ©lÃ©travail

---

## Objectifs pÃ©dagogiques

### CompÃ©tences techniques visÃ©es

Ã€ l'issue de cette activitÃ©, vous serez capable de :

1. **Comprendre** les principes et l'utilitÃ© d'un VPN SSL en entreprise
2. **Configurer** un annuaire LDAP interne sur Stormshield pour gÃ©rer les utilisateurs
3. **Mettre en Å“uvre** un serveur VPN SSL sur un pare-feu Stormshield EVA1
4. **DÃ©finir** les rÃ¨gles de filtrage adaptÃ©es pour sÃ©curiser les accÃ¨s VPN
5. **Installer et configurer** un client VPN (OpenVPN Connect)
6. **Valider** le bon fonctionnement d'une infrastructure VPN
7. **Documenter** une configuration rÃ©seau complexe

### CompÃ©tences transversales

- Autonomie dans la rÃ©solution de problÃ¨mes rÃ©seau
- Rigueur dans la configuration de services de sÃ©curitÃ©
- MÃ©thodologie de tests et validation
- RÃ©daction technique professionnelle

---

## Architecture de l'infrastructure

### SchÃ©ma rÃ©seau global

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RÃ‰SEAU LABO (PHYSIQUE)                          â”‚
â”‚                      172.25.0.0/16                                 â”‚
â”‚                    Gateway: 172.25.254.254                         â”‚
â”‚                       DNS: 172.25.254.15                           â”‚
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  MACHINE HÃ”TE           â”‚      â”‚  MACHINE HÃ”TE          â”‚       â”‚
â”‚  â”‚  Ã‰tudiant X             â”‚      â”‚  Ã‰tudiant Y            â”‚       â”‚
â”‚  â”‚  XUbuntu (physique)     â”‚      â”‚  XUbuntu (physique)    â”‚       â”‚
â”‚  â”‚  IP: 172.25.X.1         â”‚      â”‚  IP: 172.25.Y.1        â”‚       â”‚
â”‚  â”‚                         â”‚      â”‚                        â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚
â”‚  â”‚  â”‚   VirtualBox      â”‚  â”‚      â”‚  â”‚   VirtualBox     â”‚  â”‚       â”‚
â”‚  â”‚  â”‚                   â”‚  â”‚      â”‚  â”‚                  â”‚  â”‚       â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚      â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚       â”‚
â”‚  â”‚  â”‚  â”‚ VM Client  â”‚   â”‚  â”‚      â”‚  â”‚  â”‚ VM Serveur â”‚  â”‚  â”‚       â”‚
â”‚  â”‚  â”‚  â”‚ VPN        â”‚   â”‚  â”‚      â”‚  â”‚  â”‚ Debian 12  â”‚  â”‚  â”‚       â”‚
â”‚  â”‚  â”‚  â”‚ XUbuntu    â”‚â—„â”€â”€â”¼â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”¤            â”‚  â”‚  â”‚       â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚      â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚       â”‚
â”‚  â”‚  â”‚        â”‚(Bridge)  â”‚  â”‚ VPN  â”‚  â”‚        â”‚(Interne)â”‚  â”‚       â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚ SSL  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚       â”‚
â”‚  â”‚  â”‚  â”‚  SNS EVA1  â”‚   â”‚  â”‚      â”‚  â”‚  â”‚  SNS EVA1  â”‚  â”‚  â”‚       â”‚
â”‚  â”‚  â”‚  â”‚            â”‚â—„â”€â”€â”¼â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â–ºâ”‚            â”‚  â”‚  â”‚       â”‚
â”‚  â”‚  â”‚  â”‚ OUT  IN    â”‚   â”‚  â”‚(LABO)â”‚  â”‚  â”‚ OUT  IN    â”‚  â”‚  â”‚       â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚      â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### RÃ©partition des rÃ´les

#### ğŸ‘¤ Ã‰tudiant X - RÃ´le : Client VPN (utilisateur nomade)

**MatÃ©riel** :
- 1 machine hÃ´te XUbuntu physique (IP : 172.25.X.1)
- 2 machines virtuelles VirtualBox

**VM 1 - Client VPN** :
- OS : XUbuntu Desktop
- RÃ©seau : AccÃ¨s par pont (Bridge) â†’ rÃ©seau LABO
- IP : 172.25.X.10/16 (fixe)
- Gateway : 172.25.254.254
- DNS : 172.25.254.15
- Logiciel : OpenVPN Connect
- RÃ´le : Simule un poste utilisateur distant (tÃ©lÃ©travail, agence)

**VM 2 - SNS EVA1** :
- OS : Stormshield EVA1
- Interface OUT :
  - RÃ©seau : AccÃ¨s par pont (Bridge)
  - IP : 172.25.X.254/16
  - Gateway : 172.25.254.254
- Interface IN :
  - RÃ©seau : RÃ©seau interne VirtualBox (nom : `reseau-interne-X`)
  - IP : 10.X.0.254/24
- RÃ´le : Pare-feu de test (non utilisÃ© pour le VPN ici)

---

#### ğŸ‘¤ Ã‰tudiant Y - RÃ´le : Serveur VPN / Entreprise

**MatÃ©riel** :
- 1 machine hÃ´te XUbuntu physique (IP : 172.25.Y.1)
- 2 machines virtuelles VirtualBox

**VM 1 - Serveur de ressources** :
- OS : Debian 12 Server minimal
- RÃ©seau : RÃ©seau interne VirtualBox (nom : `reseau-interne-Y`)
- IP : 10.Y.1.20/24 (fixe)
- Gateway : 10.Y.1.254 (SNS IN)
- DNS : 172.25.254.15
- Services : Apache2, SSH
- RÃ´le : Serveur web/fichiers de l'entreprise (ressource Ã  protÃ©ger)

**VM 2 - SNS EVA1** :
- OS : Stormshield EVA1
- Interface OUT :
  - RÃ©seau : AccÃ¨s par pont (Bridge)
  - IP : 172.25.Y.254/16
  - Gateway : 172.25.254.254
  - **Serveur VPN SSL Ã©coute ici** (443/TCP)
- Interface IN :
  - RÃ©seau : RÃ©seau interne VirtualBox (nom : `reseau-interne-Y`)
  - IP : 10.Y.1.254/24
- RÃ´le : Pare-feu principal + Serveur VPN SSL

---

## Plan d'adressage

### Comprendre votre adresse rÃ©seau personnelle

**Rappel important :** En dÃ©but d'annÃ©e, chaque Ã©tudiant s'est vu attribuer une plage d'adresses rÃ©seau personnelle au format `172.25.X.0/24` oÃ¹ **X est votre numÃ©ro personnel**.

Cette plage `/24` indique votre "zone" dans le rÃ©seau LABO, mais **toutes vos configurations rÃ©seau doivent utiliser le masque `/16`** pour communiquer avec l'ensemble du LABO (gateway, DNS, autres Ã©tudiants).

:::tip[Retrouver votre numÃ©ro X]
Si vous ne vous souvenez plus de votre numÃ©ro personnel X :
- VÃ©rifiez dans vos notes du dÃ©but d'annÃ©e
- Consultez le fichier partagÃ© par l'enseignant
- Regardez la configuration IP actuelle de votre machine hÃ´te : `ip a`
  - Si vous voyez `172.25.42.1/16`, alors votre X = 42
:::

**Pourquoi utiliser /16 et pas /24 ?**

Le rÃ©seau LABO est un grand rÃ©seau `172.25.0.0/16` qui contient tous les Ã©tudiants :
- Le masque `/16` signifie que les deux premiers octets sont fixes : `172.25`
- Les deux derniers octets sont variables : de `0.0` Ã  `255.255`
- Cela permet 65 536 adresses au total

**Si vous configurez en /24 au lieu de /16, vous ne pourrez pas :**
- âŒ Pinguer la gateway `172.25.254.254` (elle sera considÃ©rÃ©e hors rÃ©seau)
- âŒ Communiquer avec votre binÃ´me (172.25.Y.x sera hors rÃ©seau)
- âŒ AccÃ©der Ã  Internet

**Configuration correcte :**
- âœ… Adresse IP : `172.25.X.10`
- âœ… Masque rÃ©seau : `255.255.0.0` (soit `/16`)
- âœ… Gateway : `172.25.254.254`
- âœ… DNS : `172.25.254.15`

:::caution[Conservation de l'information]
**Votre numÃ©ro X est rÃ©utilisÃ© dans toutes les activitÃ©s rÃ©seau de l'annÃ©e.**
Le `/24` indique juste votre "zone" attribuÃ©e, mais vous configurez toujours en `/16` !
:::

---

### Tableau d'adressage pour l'activitÃ© VPN

| Ã‰lÃ©ment                   | Ã‰tudiant X (Client)          | Ã‰tudiant Y (Serveur)            |
|---------------------------|------------------------------|---------------------------------|
| **Machine hÃ´te physique** | 172.25.X.1/16                | 172.25.Y.1/16                   |
| **VM Client VPN**         | 172.25.X.10/16 (Bridge)      | -                               |
| **VM Serveur Debian**     | -                            | 10.Y.1.20/24 (Interne)          |
| **SNS Interface OUT**     | 172.25.X.254/16 (Bridge)     | 172.25.Y.254/16 (Bridge)        |
| **SNS Interface IN**      | 10.X.0.254/24 (Interne)      | 10.Y.1.254/24 (Interne)         |
| **Pool VPN SSL**          | -                            | 10.Y.100.0/26 (64 adresses max) |

**LÃ©gende des masques :**
- `/16` : UtilisÃ© pour le rÃ©seau LABO (172.25.0.0/16) - permet communication avec gateway et autres Ã©tudiants
- `/24` : UtilisÃ© pour les rÃ©seaux internes privÃ©s (10.X.0.0/24, 10.Y.1.0/24) - isolÃ©s du LABO
- `/26` : UtilisÃ© pour le pool VPN (64 adresses) - sous-rÃ©seau du rÃ©seau interne Y

:::tip[Exemple concret pour un binÃ´me]
**Exemple :** Vous Ãªtes Sarah (X=15) et travaillez avec Lucas (Y=27)

**Configuration Sarah (Client VPN) :**
- VM Client : `172.25.15.10/16` â† **masque /16 obligatoire**
  - Gateway : `172.25.254.254`
  - DNS : `172.25.254.15`
- SNS OUT : `172.25.15.254/16`
- SNS IN : `10.15.0.254/24` (rÃ©seau privÃ©, non utilisÃ© ici)

**Configuration Lucas (Serveur VPN) :**
- VM Serveur Debian : `10.27.1.20/24` â† **masque /24 (rÃ©seau privÃ©)**
  - Gateway : `10.27.1.254` (son SNS IN)
  - DNS : `172.25.254.15` (via le SNS)
- SNS OUT : `172.25.27.254/16` â† **masque /16** + Serveur VPN Ã©coute ici
  - Gateway : `172.25.254.254`
- SNS IN : `10.27.1.254/24` â† **rÃ©seau privÃ© entreprise**
- Pool clients VPN : `10.27.100.0/26` (IPs de .1 Ã  .62)

**Flux de connexion VPN :**
1. Sarah (172.25.15.10) se connecte vers 172.25.27.254:443 (serveur VPN de Lucas)
2. Une fois le tunnel Ã©tabli, Sarah obtient une IP du pool : 10.27.100.5
3. Sarah peut maintenant accÃ©der au serveur Debian : 10.27.1.20
:::
